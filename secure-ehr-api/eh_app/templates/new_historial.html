{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
  <h2>Nueva Historia Clínica para {{ paciente.first_name }} {{ paciente.last_name }}</h2>
    <a href="{{ url_for('auth.view_historial_clinico', patient_id=paciente.id) }}" class="btn btn-outline-secondary mb-3">
        <i class="bi bi-arrow-left me-1"></i> Atrás
    </a>

  <form method="POST">
    <div class="mb-3">
      <label for="record_date" class="form-label">Fecha del Registro</label>
      <input type="date" class="form-control" name="record_date" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Motivo de consulta</label>
      <input type="text" class="form-control" name="reason" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Presión Arterial</label>
      <input type="text" class="form-control" name="blood_pressure">
    </div>
    <div class="mb-3">
      <label class="form-label">Frecuencia Cardíaca (bpm)</label>
      <input type="number" class="form-control" name="heart_rate">
    </div>
    <div class="mb-3">
      <label class="form-label">Temperatura (°C)</label>
      <input type="number" step="0.1" class="form-control" name="temperature">
    </div>
    <div class="mb-3">
      <label class="form-label">Saturación de Oxígeno (%)</label>
      <input type="number" class="form-control" name="oxygen_saturation">
    </div>
    <div class="mb-3">
      <label class="form-label">Diagnóstico</label>
      <input type="text" class="form-control" name="diagnosis" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Detalles del diagnóstico</label>
      <textarea class="form-control" name="diagnosis_details"></textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Tratamiento / Recomendaciones</label>
      <textarea class="form-control" name="treatment"></textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Observaciones</label>
      <textarea class="form-control" name="observations"></textarea>
    </div>
    <div class="mb-3">
      <label class="form-label">Medicamentos (JSON)</label>
      <textarea class="form-control" name="medications_json" placeholder='[{"name": "Paracetamol", "dosage": "500mg"}]'></textarea>
    </div>
    <button type="submit" class="btn btn-success">Guardar Historia Clínica</button>
    <a href="{{ url_for('auth.view_historial_clinico', patient_id=paciente.id) }}" class="btn btn-secondary">Cancelar</a>
  </form>
</div>
{% endblock %}
